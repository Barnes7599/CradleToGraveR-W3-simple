---
title: flexdashboard 02   valueBox  Gauge  DT
date: 2019-10-08
categories:
  - Practical R for Business
tags:
  - Test
  - Test2

type: post
w3codecolor: false
draft: false
thumbnail: https://i.ytimg.com/vi_webp/ef8qvUeopN4/maxresdefault.webp
---



<p><a href="https://www.youtube.com/watch?v=ef8qvUeopN4">
<img src="https://i.ytimg.com/vi_webp/ef8qvUeopN4/maxresdefault.webp">
</a></p>
<div id="click-the-image-to-play-video." class="section level2">
<h2>Click the image to play video.</h2>
<p>00:00
I left off with the layouts already figured out here we have a section with
chart a B C and D we have an expert section that is just one basically
section that spans the entire width remember a width was set at 1000 let’s
go back and I want to show you how to add multiple charts or sections in this
one column so I’m in if you look at my my code in this section right here where
it says orientation columns so basically
the column orientation means we’re going to focus on column after column up to
column as I type columns in but if I add those hash tags to create regions
it’ll add them as rows under that column let me explain here by showing you the
code so see where it says column right here with the two hash tags
well I go from two and then I have three here where chart a is so it’s indented</p>
<p>00:01
one level up so it says take this column that I just created that’s the width of
500 and create one chart with three hash tags what what what I can do is I can
just copy and paste this and I’ll do that twice let’s call it a two and a
three and I’ll show you what I mean so it goes from two hash tags to 3 and then
3 again and 3 again so these three chart a a 2 and a 3 are all aligned in new
rows under this column that’s what I’m trying to say ok so then I get to a new
column which in this this way I use a different format but it means the same
thing lines 35 and 36 together does the same
thing as line 15 here except the span is different the span is 250 let’s save
that and I’ll show you that those graphs were created for those regions we have
no graphs so if we refresh it we have chart a a2 and a3 going down now we’ve</p>
<p>00:02
done that with column 2 we’re going to call this column 2 we have chart B and C
in the same column so you can see that pattern still look where the column
starts consider that the two hash tags and now we have three hash tags
three hash tags that’s why we have chart
B and C under the same column do you see the pattern
now on chart D we have a new column oh I’m sorry we already did chart D now
under here we have one hashtag so we’re actually making a new page and that’s
where we get the expert in start so expert start is because it’s got one
hashtag expert and then I created one column with the width of 1000 but I plan
on not putting any other rows or columns in here so I’m just gonna go ahead and
delete that out completely you should probably do the same so you can follow
along okay it’s not gonna make any changes
aesthetically but I just want to delete that out because I’m not planning on
putting columns in there I want it to span the entire width without having a
column okay now we have that figured out let’s say that we wanted to make these</p>
<p>00:03
charts bigger and we want to fit them in the same area one thing we can do is we
can make tabs within this column instead of new rows nothing beats an example so
let’s go ahead and go back up to without column starts see where it says column
data width well another parameter you can put in there is put in a comma and
do dot tab set now when I hit control s on this and at rerender this I think
you’re gonna like this feature it’s real simple and makes your layout a lot
cleaner looking refreshed now you see I’ve chart a region chart a to chart a3
now granted there’s nothing in those regions but look how nice and neat that
is organized and then we still have our chart B C and D and our expert looks the
same as it did let’s go back and now let’s start filling some of this stuff
in alright so what we’re gonna do is we’re gonna create the graphs and plots
before we actually put them in our layouts and normally you want to</p>
<p>00:04
separate that out from your actual aesthetics in your layout like this this
is how we’re laying out our report well let’s build the report using an actual r
script so i’ve got a file new new file our script and we’re gonna call this
let’s save it right off the bat ctrl s and we’re gonna call this the ETL
process for a report whatever you want to call it ETL process report and it’s
under that same directory as your project click Save alright so we’re gonna use
ggplot library library ggplot2 and we’re gonna if you don’t have that installed
you would click on packages install and then just type in key view plot to and
click on install alright and then it should install no
problem what that’s going to do it’s going to allow us to create some basic
plots now this is not a lesson on how to create all kinds of fancy plots with a
GG plot this is to get you started so let’s create some very basic plots that</p>
<p>00:05
you can then modify it to your needs so I don’t underst I don’t expect you to
understand all of the code completely but I expect you to be able to modify
this code to meet your needs if you had your own CSV file imported ok
so speaking of that too to bring in some
fake data we’re gonna use MT cars it’s a data set that comes with our studio in
our so let’s say my data and we’re gonna
assign to my data the empty cars data so
command enter on that and we have on the right hand side my data it’s got 32
observations with 11 variables and here is the data here when I click on it and
we didn’t load the library so let’s just
go ahead and do that I did command enter on line 1 now the library ggplot has
been loaded let me show you how to plot some of this data so we’re gonna use GG
plot and then inside here we want to put our data our data is my data and what I</p>
<p>00:06
want to use is anesthetic I want to use an x and y axis so I’m going to use the
aesthetic so in a es the function I’m going to bring in two parameters and the
parameters gonna be X I’m going to say X is equal to and look at look at my
features list here have miles per gallon cylinders what do I want along the
x-axis I’m going to put weight WT and on the y-axis I’m going to put Q SEC which
is the quarter mile how many seconds for a quarter mile so WT + Q SEC let’s go
back here X is equal to WT along the x-axis comma my aesthetic for y is going
to be Q SEC okay now that’s still not going to do anything but if I actually
do command enter on here you’ll see my plot area
here is just a blank canvas let’s add a geometry to this so we’re gonna add when
I put the plus sign there and we’re gonna add geum underscore point and
that’s it nice and simple command enter on that and WS was not found oh because</p>
<p>00:07
that’s WT wait let’s try this again and we have an actual plot over here on
the right hand side at the bottom but we didn’t assign it any variable we didn’t
save this plot we simply displayed it so let’s say that as we’ll call it chart a
and we’ll assign this plot to chart a command enter okay now now really if you
did this without displaying it first you wouldn’t see it at all we only see it
because it saves the history here hit that little brush here and you can
delete the history of your plots now if I rerun line 5 you won’t see it but it
is stored in data you can see in the environment 30 to observe it or a chart
a list of 9 if I wanted to actually see it I can just type in chart a again
command enter and it’ll plot again but we’re not interested in doing that we’re
interested in using chart a I’m gonna save this control s over here where
chart a belongs so down here chart a let’s just type in chart a and then I</p>
<p>00:08
can run this there it is right there I’m gonna save it to control S or command S
and let’s run that our markdown again our markdown render and the name of our
file is report dot arm D whatever it is and now we should see this chart up here
magically in our area that we set it in chart a chart a - has nothing in there
and so forth and so forth so you get the idea once you get good you can look up
how to do different plots bar plots histograms things like that you can
start plugging away and putting stuff in there let’s do one more chart just to
give you a little bit of feel for that a
little bit more feel go back to your ETL process report let’s create chart B oh
let’s do it let’s create chart a to chart a - let’s assign that to a plot
it’s going to be the same data my day and this time for our x-axis we’ll use x</p>
<p>00:09
equals I don’t know maybe we’ll do miles per gallon and Y is equal to let’s take
a look at the data one more time so maybe we could do a miles per gallon on
the x-axis and I don’t know horsepower on the y-axis we’re gonna add a
scatterplot the G on point command enter now see what it looks like we can
actually type it in here try to - I always do that so it did plot it and
here we go it’s not a you know it could be meaningful for somebody that wants to
know the miles per gallon two horsepower
right so whatever that means we’re gonna delete that from here and we’re gonna
put chart a to where it belongs just to get you the idea so try day two let’s
just plug in chart a two again let’s follow these steps ctrl s save it let’s
rerender this hit the UP button a couple
times and here we go it’s being rendered refresh and chart a two there it is see</p>
<p>00:10
there’s two different charts okay charts not the only thing you can do with this
let’s play with some other stuff real quick just to show you let’s go and fill
in chart B and we’re not gonna call it chart B when I call it a value box so
let’s change the name of that chart B is
not sharp B it’s going to be a value box a value box is just an indicator that
gives you a number but it’s a little bit
more aesthetically pleasing all it is is
just type in the word value and then box and then open parentheses and you can
put a number in there so I could put the
number in 32:23 whatever hit this button here now it doesn’t show inside of your
RMD file but hit command s and let’s run that again I know there’s a lot of
repeat in here but I want to really drill this down
so let’s render come back refresh and see that 23 and it colored it blue and
has value box down there so that’s that’s the idea is it’s just more
aesthetically pleasing so you might have a bunch of different values that you</p>
<p>00:11
want to show you know you’ve served 23 customers this hour you’ve done 23 extra
whatever there it is right now we can put an icon there to make it a little
bit more pretty there’s a few icons you can use so if you hit the comma you can
add a parameter that’s called icon equals and then FA - pencil is one of
them you know might have to Google this to look up other icons and you might
even be able to do your own modified icons that you create but that’s a
little bit beyond the scope of this so the value box just look up value box our
icon options something like that hit the play button I’m gonna save it again and
let’s go ahead and run that there we go refresh and I’m trying to go quickly
through this so you know you know you can skip to the part that you want to
really get done so there’s your pencil icon chart see we’re gonna put a gauge a
gauge what’s a gauge well you’ll see let’s just let’s just put it in there</p>
<p>00:12
gauge is you put a number in there say 23 and then you have a minimum and a
maximum min equals zero max equals 100 now if I run this there’s our gauge I’m
not gonna render it yet because I want to show you some more things beforehand
so that’s what a gauge is but how did it know to turn green right so you have a
minute max so you can adjust this any way you want you can have a minimum
start at 20 and it’ll adjust accordingly 20 to 100 is 23 and it knows the ratios
so it’s pretty good let’s start at zero again but what I want to do is I want to
set the colors myself so let’s do comma and I’m going to do gauge sector sectors
with a capital S and you can see up here it says success danger and warning
warning so success equals and we’re gonna put in a a set of numbers we’re</p>
<p>00:13
gonna say success is equal to 90 to 100 comma warning is equal to and we’ll say
that is equal to fifty to eighty nine and then finally we’ll do danger is
equal to 0 to 49 makes sense and this is just arbitrary so when you do
that and we see we’re in the red because 23 is in the danger zone
let’s do 53 just to see or 53 right and again and it turns yellow and of course
finally if we were at 99 it should be green see how that works now inside of
here where I put 99 and up here in the value box where I put 23 you can put
actual variables in there so your variables that are over here you can you
can add in there or you can actually create them on the fly if you’d want now
again this is a very very introductory not really going to teach you a whole</p>
<p>00:14
lot about our but how to use flex dashboards so I’m assuming you know some
are or you can pick it up rather quickly so my data has 32 observations let’s
let’s add that to the value box so we want a 32 in there but we want to do it
using my data so I’m gonna say my data which is available because it’s in my
environment I can use my data as a variable but my data is a data frame and
this thing takes an actual number so I want to do the dimensions I want to
figure out what’s the dimensions I know the dimensions are 32 by 11 but I want
to do it programmatically so it dimensions of my data but that’s going
to give me two numbers a row and a column so I’m what the first of those
numbers I want the row so I subset it with the brackets and I say one so now
if I have this I have okay take my data which is a basically a spreadsheet of
data frame take the dimensions which is going to be a 32 by 11 in fact I can
show you down here in the console I can say dimension my data and I hit enter
here and it says 32 by 11 see there’s two numbers I want the first of those
two numbers fact you can do that here just to test it out save you some time</p>
<p>00:15
if you’re if you want so there’s a number 32 got it
so if I hit play on that you get 32 now the caveat is you have to run your
script first over here because my data doesn’t exist until you run this alright
so we’ve got that figured out and over in the gauge let’s just keep that at 99
I gave you the example of how you can plug in variables in there let’s do a
quick save and take a last look at it so let’s do our markdown render quotes
report the RMD file and run it just to make sure we’re all
on the same page we get chart a chart a to try day three is blank we’ve got a
value box of 32 and a gauge that shows 99 4 chart D let’s just throw some
narrative in there so let’s go down to church D and let’s just type in because
this is not our this is not our code because I don’t have an R chunk in there
they are chunk again is the backticks this little our situation here you have</p>
<p>00:16
all right so in the R oh I’m sorry chart D we’re gonna put
just a narrative hello this is my report by the way
bt-dubs I can change colors and I can say I’m HTML now font color equals red
hello red font and close that out let’s see if this works command s so I
embedded some HTML in there which will give you a lot of leverage and leeway to
customize let’s go back and see if I did
that correctly and we have some red text over here in chart D very powerful you
can change the fonts you can do a lot of HTML but not all but that’s just one
more thing finally let’s get to the last thing we
have we have a pretty full dashboard here with multiple charts now let’s go
to expert and say what do I want to fill that in with well maybe I want the</p>
<p>00:17
actual data the underlying data so let’s go back and we’re gonna do something in
expert in the R we’re gonna add a data table so to do that I’m going to add up
here at the very top where it says library Flex dashboard let’s add a
library DT which is data table you can do command enter or you can run the
whole thing again it doesn’t matter and if DT is not installed remember
packages install DT and then you should have that available no problem ok DT is
going to give us the ability to add a data table data tables are pretty cool
let’s start off with a very simple one just called data table and we’re gonna
add in our data which is my data and that’s it I’ll hit the little button
here you can see what it looks like right here you
see how when I move the mouse it highlights that row that’s a pretty
awesome feature I have a entry list here I can show 25 I can show 10 and all of
these are customizable and I can do a search so it’s very powerful and I as
you can see down here I’m what pag Nate paginated whatever it’s called tag nated</p>
<p>00:18
anyways you can go to different pages okay so one thing that’s really
important to a lot of people that are not used to other means besides like
excel is the ability to export the data so let’s see if we can figure out how to
do that and when we’re gonna we’re going
to do that in just a moment let’s render this let’s first let’s save it command
us and render this one more time just to
show you what it looks like so I want to add just export buttons and then we are
finished we have a full on dashboard and it’s customizable to your needs I will
show you exactly one more thing afterwards - now that I think of it so
let’s add buttons to this and this could
get a little complicated let’s go to the
Internet so I’m gonna do a Google search and we’re gonna type in DTR for data
table and our language I’m gonna say buttons and this very first one here is
the one I’m going to pick hopefully you can find it using Google as well and</p>
<p>00:19
what I have here is an example see how it says copy and print and search all
this and so there’s other examples too there’s a download button so there’s all
kinds of things you can do let’s just copy where it says data table because
that’s what we’re actually using we’re gonna copy this whole section we’re
gonna go back and let’s just we know our data is called my data so control V on
that change the iris to data set to my data right so now if we run this we
should see at least those buttons we have print and copy pretty cool let’s
add CSV I know you can add CSV comma quote CSV comma quote run this again and
now you have the ability to export a CSV and there are other options so I advise
you to go explore the data table parameters just to break this down for a
second one what are the parameters is and extinctions so we have an
extinctions equal to but and then we have an options list and the</p>
<p>00:20
options list is where a lot of things are going to be at so data table takes a
parameter called options but inside of options you can have a list of options
and inside of that list we have this thing called bf bf our tip and buttons
so this corresponds to the buttons extinctions so they’re all working
together and we can have a list of buttons basically and what other buttons
are in there I’m not sure but you can look those up let’s render this one last
time just to make sure that the buttons show up on the HTML page outputs created
go back and refresh expert and there are our buttons if I click on CSV like I
just did I can open this up and there it
is it is a CSV file comma separated file it created for us so that’ll please a
lot of the people that don’t want to work with in this area finally just as a
bonus you don’t probably want to work with empty cars you want to work with</p>
<p>00:21
your own data set so let’s go ahead and do that instead okay so in the ETL
process report dot R that we created I said my data is equal to Mt cars let’s
comment that out because we don’t want that we want to use our own data right
okay so let’s do my data is equal to we’re gonna do read underscore CSV
actually let’s keep this very simple read dot CSV and underscore is using a
different library called tidy verse we’ll get into that in other lessons
elsewhere read dot CSV and then you open paren tecee and you just want to put in
the location of your file or or the URL of the CSV file now if you’re on a
Windows computer for your path you don’t want to use backs but back slashes like
this like you don’t want to do C Drive backslash your path you can do C Drive</p>
<p>00:22
backslash backslash user backslash backslash whatever it is desktop all the
way to your actual CSV file and on a Mac you would use the forward slash isn’t
stead poor slash user slash desktop slash my data dot CSV I’m going to show
you an example right now but I wanted to make that crystal clear if you’re on
Windows it’s two back spaces or forward slash but not one backs back slash I
think you got that idea let’s just grab I mean I do have an excel file here
let’s let’s just mmm I don’t even know where I saved it let’s just grab one
from the internet so I can show you that go to Google just say example CSV file
find any any example you want CSV files - people cool let’s say biostats CSV see
it’s right here copy this command C and then let’s go back over to here and we</p>
<p>00:23
do command V now it’s going to read in that CSV file from the internet and it’s
gonna store it into my data however now our chart a and our chart a two will be
different so let’s go ahead and do that anyways let’s do command enter on my
data we have it so it’s 18 observations of five variables now our chart a and
chart a2 are not gonna make any sense because there’s no WT or q SEC I don’t
think let’s click let’s check it my data okay we have name sex age height etc
let’s do age versus height for the first chart and then yeah that’ll work
perfectly so x equals age and then the y equals to the height you can type in my
data dollar sign just to get the actual so the actual name of the feature is
height dot in dot so hide in anxious basically so let’s go ahead and command</p>
<p>00:24
enter on that and now on the other one we will do let’s do age versus weight so
age for the x and we’ll do weight and since I don’t know what the actual
variable name is I’m going to do the my data
thing again my data w-wait boom alright I’m gonna save that I’m gonna come back
over to the dashboard which I didn’t change anything on this dashboard right
I’m gonna just click on this Run button up top I’m gonna say run all hopefully
it runs who got it got an error right off the bat there’s age I must have used
age somewhere here Oh chart a let’s go back I don’t think I ever
there’s no age let’s try this my data oh its capital a so aged I should work so
let’s rerun all of this in fact you can just click on run and it’ll run the
whole script or actually highlight the whole thing click on run get to run the</p>
<p>00:25
whole script come back over to the dashboard run all and that’s that and
let’s render it now I didn’t save it so let’s just do a test run and see if it
actually matters well know right off the bat because we’re no longer doing Q
second wait when I when I hit this free fresh button let’s see what happens all
right we got age and height there we go and over here we have age and weight
there’s your plot now these were just static numbers except for the value box
was actually the dimension the 18 observations here’s our chart D and our
data right here and I can download it print a copy I can search for certain
things I want search for Gwen there’s Gwen right here that’s it
modify this to your needs play with it there’s a lot to learn about our but
anybody that’s a business analyst or anybody interested in trying to just
display things in a dashboard can use this with very little programming effort
whatsoever so I hope that you can modify this and create your own dashboardsEnd of file</p>
</div>
